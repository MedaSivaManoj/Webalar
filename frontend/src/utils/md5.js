// Simple MD5 implementation for Gravatar (for demo; use a library in production)
// Source: https://github.com/blueimp/JavaScript-MD5 (minified for brevity)
// ...existing code...
(function(){function r(d){var c=unescape(encodeURIComponent(d)),b=[];for(d=0;d<c.length;d++)b.push(c.charCodeAt(d));return b}function n(d){for(var c="",b=0;4>b;b++)c+=("0"+(d>>>8*b&255).toString(16)).slice(-2);return c}function p(d){for(var c=0;c<d.length;c++)d[c]=n(d[c]);return d.join("")}function q(d){var c,b=d.length,a=[1732584193,-271733879,-1732584194,271733878],e=Array(16),f,g,h,k,l;d[b>>2]|=128<<8*(b%4);d[14+(b+8>>6<<4)]=b<<3;for(var m=0;m<d.length;m+=16){c=a.slice(0);for(var i=0;64>i;i++){var j=i>>4;f=c[0];g=c[1];h=c[2];k=c[3];l=c[1]&c[2]|~c[1]&c[3];if(16>i)l=(c[1]&c[2]|~c[1]&c[3])+c[0]+((d[m+i%16]|0)+3614090360|0);else if(32>i)l=(c[1]&c[3]|c[2]&~c[3])+c[0]+((d[m+(5*i+1)%16]|0)+3905402710|0);else if(48>i)l=(c[1]^c[2]^c[3])+c[0]+((d[m+(3*i+5)%16]|0)+606105819|0);else l=(c[2]^(c[1]|~c[3]))+c[0]+((d[m+(7*i)%16]|0)+3250441966|0);c[0]=c[3];c[3]=c[2];c[2]=c[1];c[1]=c[1]+((l<<((i%4)*8)|l>>>((4-i%4)*8)));}for(i=0;4>i;i++)a[i]+=c[i]}return a}window.md5=function(d){return p(q(r(d)))};})();
